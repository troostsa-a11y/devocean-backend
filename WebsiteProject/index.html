<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#9e4b13" />
  <title>DEVOCEAN Lodge | Eco Beach Stays in Ponta do Ouro</title>

  <!-- Consent Mode v2 Defaults (MUST be FIRST script) -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }

    // EU+UK = denied by default
    gtag('consent', 'default', {
      ad_storage: 'denied',
      ad_user_data: 'denied',
      ad_personalization: 'denied',
      analytics_storage: 'denied',
      functionality_storage: 'granted',
      personalization_storage: 'granted',
      security_storage: 'granted',
      region: [
        'AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT',
        'LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE','IS','LI','NO','GB'
      ]
    });

    // Everywhere else = granted
    gtag('consent', 'default', {
      ad_storage: 'granted',
      ad_user_data: 'granted',
      ad_personalization: 'granted',
      analytics_storage: 'granted',
      functionality_storage: 'granted',
      personalization_storage: 'granted',
      security_storage: 'granted'
    });
  </script>

  <!-- Google Tag Manager (INP-Optimized: Load AFTER first interaction completes) -->
  <script>
    (function() {
      var gtmLoaded = false;
      var firstInteractionComplete = false;
      
      function loadGTM() {
        if (gtmLoaded) return;
        gtmLoaded = true;
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-532W3HH2');
      }
      
      function scheduleGTMAfterInteraction() {
        if (!firstInteractionComplete) return;
        // Wait 500ms after first interaction completes before loading
        setTimeout(function() {
          if (window.requestIdleCallback) {
            requestIdleCallback(loadGTM, {timeout: 3000});
          } else {
            setTimeout(loadGTM, 100);
          }
        }, 500);
      }
      
      // Mark first interaction as complete and schedule GTM
      ['click','keydown','touchstart'].forEach(function(e){
        window.addEventListener(e, function() {
          setTimeout(function() {
            firstInteractionComplete = true;
            scheduleGTMAfterInteraction();
          }, 0);
        }, {once: true, passive: true});
      });
      
      // Fallback: load after 8 seconds if no interaction
      setTimeout(function() {
        firstInteractionComplete = true;
        scheduleGTMAfterInteraction();
      }, 8000);
    })();
  </script>
  <!-- End Google Tag Manager -->

  <!-- Start cookieyes banner (INP-Optimized: Load AFTER first interaction completes) -->
  <script>
    (function() {
      var cookieyesLoaded = false;
      var firstInteractionComplete = false;
      
      function loadCookieyes() {
        if (cookieyesLoaded) return;
        cookieyesLoaded = true;
        var s = document.createElement('script');
        s.id = 'cookieyes';
        s.type = 'text/javascript';
        s.src = 'https://cdn-cookieyes.com/client_data/f0a2da84090ecaa3b37f74af/script.js';
        document.head.appendChild(s);
      }
      
      function scheduleCookieyesAfterInteraction() {
        if (!firstInteractionComplete) return;
        // Wait 700ms after first interaction completes (stagger from GTM)
        setTimeout(function() {
          if (window.requestIdleCallback) {
            requestIdleCallback(loadCookieyes, {timeout: 3000});
          } else {
            setTimeout(loadCookieyes, 100);
          }
        }, 700);
      }
      
      // Mark first interaction as complete and schedule CookieYes
      ['click','keydown','touchstart'].forEach(function(e){
        window.addEventListener(e, function() {
          setTimeout(function() {
            firstInteractionComplete = true;
            scheduleCookieyesAfterInteraction();
          }, 0);
        }, {once: true, passive: true});
      });
      
      // Fallback: load after 8 seconds if no interaction
      setTimeout(function() {
        firstInteractionComplete = true;
        scheduleCookieyesAfterInteraction();
      }, 8000);
    })();
  </script>
  <!-- End cookieyes banner -->

  <!-- Critical: Preload hero image for LCP optimization (fetchpriority=high for immediate load) -->
  <link rel="preload" as="image" href="/photos/hero01.webp" type="image/webp" fetchpriority="high" media="(min-width: 801px)">
  <link rel="preload" as="image" href="/photos/hero01-mobile.webp" type="image/webp" fetchpriority="high" media="(max-width: 800px)">
  
  <!-- Modulepreload main JS entry - flattens critical request chain -->
  <!-- Auto-injected during build by vite-plugin-preload-entry.js -->
  
  <!-- DNS prefetch for external services (preconnect removed for delayed scripts) -->
  <link rel="dns-prefetch" href="https://book.devoceanlodge.com">

  <!-- User Engagement Detection (INP-Optimized: Load AFTER first interaction completes) -->
  <script>
    (function() {
      var trackerLoaded = false;
      var firstInteractionComplete = false;
      
      function loadTracker() {
        if (trackerLoaded) return;
        trackerLoaded = true;
        var s = document.createElement('script');
        s.src = '/engagement-tracker.js';
        document.head.appendChild(s);
      }
      
      function scheduleTrackerAfterInteraction() {
        if (!firstInteractionComplete) return;
        // Wait 900ms after first interaction completes (stagger from GTM/CookieYes)
        setTimeout(function() {
          if (window.requestIdleCallback) {
            requestIdleCallback(loadTracker, {timeout: 3000});
          } else {
            setTimeout(loadTracker, 100);
          }
        }, 900);
      }
      
      // Mark first interaction as complete and schedule tracker
      ['click','keydown','touchstart'].forEach(function(e){
        window.addEventListener(e, function() {
          setTimeout(function() {
            firstInteractionComplete = true;
            scheduleTrackerAfterInteraction();
          }, 0);
        }, {once: true, passive: true});
      });
      
      // Fallback: load after 8 seconds if no interaction
      setTimeout(function() {
        firstInteractionComplete = true;
        scheduleTrackerAfterInteraction();
      }, 8000);
    })();
  </script>

  <!-- Rage Click Detection (INP-Optimized: Load AFTER first interaction completes) -->
  <script>
    (function() {
      var rageDetectorLoaded = false;
      var firstInteractionComplete = false;
      
      function loadRageDetector() {
        if (rageDetectorLoaded) return;
        rageDetectorLoaded = true;
        var s = document.createElement('script');
        s.src = '/rage-click-detector.js';
        document.head.appendChild(s);
      }
      
      function scheduleRageDetectorAfterInteraction() {
        if (!firstInteractionComplete) return;
        // Wait 1100ms after first interaction completes (stagger from engagement tracker)
        setTimeout(function() {
          if (window.requestIdleCallback) {
            requestIdleCallback(loadRageDetector, {timeout: 3000});
          } else {
            setTimeout(loadRageDetector, 100);
          }
        }, 1100);
      }
      
      // Mark first interaction as complete and schedule rage detector
      ['click','keydown','touchstart'].forEach(function(e){
        window.addEventListener(e, function() {
          setTimeout(function() {
            firstInteractionComplete = true;
            scheduleRageDetectorAfterInteraction();
          }, 0);
        }, {once: true, passive: true});
      });
      
      // Fallback: load after 8 seconds if no interaction
      setTimeout(function() {
        firstInteractionComplete = true;
        scheduleRageDetectorAfterInteraction();
      }, 8000);
    })();
  </script>

  <!-- reCAPTCHA v3 (lazy loaded when contact form visible) -->
  <script>
    window.RECAPTCHA_SITE_KEY = '6LdENtwrAAAAAPy6JsCXFJLR16ST1BnX-NyPDC7L';
    
    // Lazy loader for reCAPTCHA
    window.loadRecaptcha = (function() {
      let promise = null;
      
      return function() {
        if (promise) return promise;
        
        if (window.grecaptcha) {
          promise = Promise.resolve(window.grecaptcha);
          return promise;
        }
        
        promise = new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = 'https://www.google.com/recaptcha/api.js?render=' + window.RECAPTCHA_SITE_KEY;
          script.async = true;
          script.defer = true;
          script.onload = () => resolve(window.grecaptcha);
          script.onerror = () => reject(new Error('Failed to load reCAPTCHA'));
          document.head.appendChild(script);
        });
        
        return promise;
      };
    })();
  </script>
  <!-- SEO etc. -->
  <meta name="color-scheme" content="light dark" />
  <meta name="description"
    content="Eco-friendly beach accommodation in Ponta do Ouro, Mozambique. Safari tents, cottage & chalet near the beach. Family-run hospitality and great value." />
  <link rel="canonical" href="https://devoceanlodge.com/" />
  <meta name="robots" content="index,follow,max-snippet:-1,max-image-preview:large,max-video-preview:-1" />

  <!-- Favicons / app icons -->
  <link rel="icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#9e4b13">

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="DEVOCEAN Lodge | Ponta do Ouro, Mozambique" />
  <meta property="og:description"
    content="Eco-friendly stays near the beach. Tents, cottages and thatched chalets with warm, family-run hospitality." />
  <meta property="og:url" content="https://devoceanlodge.com/" />
  <meta property="og:image" content="https://devoceanlodge.com/photos/hero01.jpg" />
  <meta property="og:image:width" content="1920" />
  <meta property="og:image:height" content="1280" />
  <meta property="og:image:alt" content="DEVOCEAN Lodge beachfront accommodation in Ponta do Ouro, Mozambique" />
  <meta property="og:site_name" content="DEVOCEAN Lodge" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:locale:alternate" content="pt_PT" />
  <meta property="og:locale:alternate" content="pt_MZ" />
  <meta property="og:locale:alternate" content="nl_NL" />
  <meta property="og:locale:alternate" content="fr_FR" />
  <meta property="og:locale:alternate" content="it_IT" />
  <meta property="og:locale:alternate" content="de_DE" />
  <meta property="og:locale:alternate" content="es_ES" />
  <meta property="og:locale:alternate" content="sv_SE" />
  <meta property="og:locale:alternate" content="pl_PL" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="DEVOCEAN Lodge | Ponta do Ouro, Mozambique" />
  <meta name="twitter:description"
    content="Eco-friendly stays near the beach. Tents, cottages and thatched chalets with warm, family-run hospitality." />
  <meta name="twitter:image" content="https://devoceanlodge.com/photos/hero01.jpg" />
  <meta name="twitter:image:alt" content="DEVOCEAN Lodge beachfront accommodation in Ponta do Ouro, Mozambique" />


  <!-- Inline Critical CSS (mobile-first: prevents 160ms CSS blocking on 4G) -->
  <style>
    /* INP Optimization: Instant visual feedback for all interactions (CSS-based, no JS required) */
    button:active, a:active, [role="button"]:active, 
    input[type="submit"]:active, input[type="button"]:active, 
    select:active, .faq-question:active, .benefit-card:active {
      opacity: 0.7 !important;
      transform: scale(0.98) !important;
      transition: opacity 50ms, transform 50ms !important;
    }
    
    /* Minimal reset */
    *,::before,::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}
    html{line-height:1.5;-webkit-text-size-adjust:100%;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}
    body{margin:0;line-height:inherit;background-color:#f8fafc}
    /* Brand tokens - Accurate mobile-first values to prevent CLS */
    :root{--brand:#9e4b13;--topbar-h:40px;--header-h:56px;--stack-h:96px}
    @media (min-width:768px){:root{--header-h:64px;--stack-h:104px}}
    /* Smooth scroll */
    html{scroll-behavior:smooth;overflow-x:hidden}
    body{overflow-x:hidden;background-color:#f8fafc}
    /* Critical layout */
    #root{position:relative;z-index:1}
  </style>

  <!-- Pre-calculate sticky header height BEFORE first paint (prevents CLS) -->
  <script>
    (function() {
      // Mobile: 40px topbar + 56px header = 96px
      // Desktop: 40px topbar + 64px header = 104px
      // Set accurate values immediately to prevent layout shift
      var isMobile = window.innerWidth < 768;
      var stackHeight = isMobile ? 96 : 104;
      var headerHeight = isMobile ? 56 : 64;
      
      document.documentElement.style.setProperty('--stack-h', stackHeight + 'px');
      document.documentElement.style.setProperty('--header-h', headerHeight + 'px');
      document.documentElement.style.setProperty('--topbar-h', '40px');
      
      // Recalculate ONCE after DOM is ready (no retries to prevent CLS)
      // Critical: Single recalc ensures React renders, but no recursive retries
      function recalcHeaderHeightOnce() {
        var topbar = document.querySelector(".topbar");
        var header = document.querySelector("header");
        
        // Only update if elements exist (no retry if not ready)
        if (topbar && header) {
          var actualTopbar = topbar.offsetHeight;
          var actualHeader = header.offsetHeight;
          var actualStack = actualTopbar + actualHeader;
          
          // Only update if values changed
          if (actualStack !== stackHeight) {
            document.documentElement.style.setProperty('--stack-h', actualStack + 'px');
            document.documentElement.style.setProperty('--header-h', actualHeader + 'px');
            document.documentElement.style.setProperty('--topbar-h', actualTopbar + 'px');
          }
        }
        // If elements don't exist, skip - App.jsx will handle resize
      }
      
      // Run once when DOM is ready (no recursive retries)
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', recalcHeaderHeightOnce);
      } else {
        recalcHeaderHeightOnce();
      }
    })();
  </script>

  <!-- Critical CSS for instant hero display (before React loads) -->
  <style>
    /* Hero placeholder - non-blocking overlay */
    #hero-placeholder {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      z-index: 9999;
      background: #000;
      opacity: 1;
      transition: opacity 0.8s ease-out;
      pointer-events: auto;
    }
    #hero-placeholder picture {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      animation: fadeInImage 0.8s ease-out forwards;
    }
    #hero-placeholder img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
    }
    #hero-placeholder .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.4);
      z-index: 2;
      opacity: 0;
      animation: fadeInImage 0.8s ease-out forwards;
    }
    #hero-placeholder .content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 3;
      text-align: center;
      color: white;
      padding: 1rem;
      max-width: 900px;
      width: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      /* LCP Optimization: Start visible, add subtle fade-in without delay */
      opacity: 1;
      animation: subtleFadeIn 0.4s ease-out forwards;
    }
    #hero-placeholder h1 {
      font-size: clamp(2rem, 5vw, 3.75rem);
      font-weight: 700;
      line-height: 1.2;
      margin: 0 0 1rem 0;
    }
    #hero-placeholder p {
      font-size: clamp(1rem, 2.5vw, 1.25rem);
      line-height: 1.6;
      margin: 0;
      opacity: 0.95;
    }
    @keyframes fadeInImage {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes subtleFadeIn {
      from { 
        opacity: 0.7;
      }
      to { 
        opacity: 1;
      }
    }
    /* Main app renders underneath hero (hidden only when hero is active) */
    #root {
      position: relative;
      z-index: 1;
      opacity: 1;
      transition: opacity 0.5s ease-out;
    }
    /* Hide #root content while hero placeholder is active */
    html.hero-active #root {
      opacity: 0;
    }
    /* Fade out placeholder when triggered by JavaScript */
    #hero-placeholder.fade-out {
      opacity: 0;
      pointer-events: none;
    }
    /* When hero is active, prevent scrolling */
    html.hero-active {
      overflow: hidden;
    }
  </style>

  <!-- Hero placeholder timer (shows for 5 seconds on first visit only) -->
  <script>
    (function() {
      // Check if user has already seen the hero
      // Use sessionStorage (persists during SPA navigation, clears on tab close)
      // and localStorage (persists across browser sessions)
      var heroSeenThisSession, heroSeenEver;
      try {
        heroSeenThisSession = sessionStorage.getItem('devocean-hero-seen');
        heroSeenEver = localStorage.getItem('devocean-hero-seen');
      } catch (e) {
        // Storage unavailable - treat as first visit
        heroSeenThisSession = null;
        heroSeenEver = null;
      }
      
      // Wait for DOM to be ready
      function init() {
        var placeholder = document.getElementById('hero-placeholder');
        var root = document.getElementById('root');
        
        // Skip hero if already shown this session OR returning visitor
        // Note: PageSpeed and real users both see the optimized placeholder for accurate LCP measurement
        if (heroSeenThisSession || heroSeenEver) {
          // Skip hero - show main site immediately
          if (placeholder) {
            placeholder.style.display = 'none';
          }
          return;
        }
        
        // First visit - show hero opening sequence
        // Note: Content renders underneath, hero is just a visual overlay
        document.documentElement.classList.add('hero-active');
        
        // Mark hero as seen immediately (both session and persistent)
        try {
          sessionStorage.setItem('devocean-hero-seen', 'true');
          localStorage.setItem('devocean-hero-seen', 'true');
        } catch (e) {
          // Storage unavailable - silent fail
        }
        
        // Keep hero placeholder visible for 5 seconds, then fade out
        setTimeout(function() {
          if (placeholder) {
            placeholder.classList.add('fade-out');
            // Remove from DOM after fade completes
            setTimeout(function() {
              placeholder.style.display = 'none';
            }, 800);
          }
          
          // Restore scrolling after fade completes
          setTimeout(function() {
            document.documentElement.classList.remove('hero-active');
          }, 900); // 900ms = 800ms fade + 100ms buffer
        }, 5000); // 5 seconds
      }
      
      // Run init when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>

  <!-- Early interaction handler (improves INP by providing instant feedback) -->
  <script>
    (function() {
      // Add visual feedback for clicks during hydration
      // This improves perceived responsiveness even before React is ready
      let hydrated = false;
      
      // Mark as hydrated when React renders
      const observer = new MutationObserver(function() {
        const root = document.getElementById('root');
        if (root && root.children.length > 0) {
          hydrated = true;
          observer.disconnect();
        }
      });
      
      // Start observing when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          const root = document.getElementById('root');
          if (root) observer.observe(root, { childList: true });
        });
      } else {
        const root = document.getElementById('root');
        if (root) observer.observe(root, { childList: true });
      }
      
      // Provide visual feedback for early clicks (before hydration)
      document.addEventListener('click', function(e) {
        if (!hydrated && e.target.tagName === 'A') {
          // Add subtle visual feedback
          e.target.style.opacity = '0.7';
          setTimeout(function() {
            e.target.style.opacity = '';
          }, 150);
        }
      }, { capture: true, passive: true });
    })();
  </script>
</head>

<body>
  <!-- GTM (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-532W3HH2" height="0" width="0"
      style="display:none;visibility:hidden"></iframe>
  </noscript>

  <!-- DEV entry (Vite) -->
  <script type="module" src="/src/main.jsx"></script>

  <div id="root"></div>

  <!-- Static hero image (displays instantly before React loads) -->
  <div id="hero-placeholder">
    <picture>
      <source media="(max-width: 800px)" srcset="/photos/hero01-mobile.webp" type="image/webp">
      <source media="(min-width: 801px)" srcset="/photos/hero01.webp" type="image/webp">
      <img src="/photos/hero01.jpg" alt="DEVOCEAN Lodge" fetchpriority="high" loading="eager">
    </picture>
    <div class="overlay"></div>
    <div class="content">
      <div id="hero-title" style="font-size: 2.5rem; font-weight: 700; line-height: 1.2;">DEVOCEAN Lodge</div>
      <p id="hero-subtitle">Eco-friendly stays a few hundred meters from the beach in Ponta do Ouro, Southern Mozambique.</p>
    </div>
  </div>

  <!-- Localize hero placeholder text before display -->
  <script>
    (function() {
      // Hero translations for all 17 languages
      var heroTranslations = {
        'af-ZA': { title: 'DEVOCEAN Lodge', subtitle: "Eko-vriendelike verblyf 'n paar honderd meter vanaf die strand in Ponta do Ouro, Suid-Mosambiek." },
        'de-DE': { title: 'DEVOCEAN Lodge', subtitle: 'Umweltfreundliche Unterkünfte nur wenige hundert Meter vom Strand in Ponta do Ouro, Südmosambik.' },
        'en-GB': { title: 'DEVOCEAN Lodge', subtitle: 'Eco-friendly stays a few hundred meters from the beach in Ponta do Ouro, Southern Mozambique.' },
        'en-US': { title: 'DEVOCEAN Lodge', subtitle: 'Eco-friendly stays a few hundred meters from the beach in Ponta do Ouro, Southern Mozambique.' },
        'es-ES': { title: 'DEVOCEAN Lodge', subtitle: 'Alojamientos ecológicos a pocos cientos de metros de la playa en Ponta do Ouro, Sur de Mozambique.' },
        'fr-FR': { title: 'DEVOCEAN Lodge', subtitle: 'Hébergements écoresponsables à quelques centaines de mètres de la plage à Ponta do Ouro, sud du Mozambique.' },
        'it-IT': { title: 'DEVOCEAN Lodge', subtitle: 'Soggiorni eco-friendly a pochi minuti dalla spiaggia di Ponta do Ouro, Mozambico meridionale.' },
        'ja-JP': { title: 'DEVOCEAN Lodge', subtitle: 'モザンビーク南部のPonta do Ouroのビーチから数百メートル離れたエコフレンドリーな滞在。' },
        'nl-NL': { title: 'DEVOCEAN Lodge', subtitle: 'Eco-vriendelijke verblijven op enkele honderden meters van het strand in Ponta do Ouro, Zuid-Mozambique.' },
        'pl': { title: 'DEVOCEAN Lodge', subtitle: 'Ekologiczne pobyty kilkaset metrów od plaży w Ponta do Ouro, południowy Mozambik.' },
        'pt-BR': { title: 'DEVOCEAN Lodge', subtitle: 'Estadias ecológicas a poucas centenas de metros da praia em Ponta do Ouro, sul de Moçambique.' },
        'pt-PT': { title: 'DEVOCEAN Lodge', subtitle: 'Estadias ecológicas a poucas centenas de metros da praia em Ponta do Ouro, sul de Moçambique.' },
        'ru': { title: 'DEVOCEAN Lodge', subtitle: 'Экологичное проживание в нескольких сотнях метров от пляжа в Пonta do Ouro, Южный Мозамбик.' },
        'sv': { title: 'DEVOCEAN Lodge', subtitle: 'Miljövänliga boenden några hundra meter från stranden i Ponta do Ouro, södra Moçambique.' },
        'sw': { title: 'DEVOCEAN Lodge', subtitle: 'Malazi yanayofaa na mazingira yaliyo umbali wa mita chache kutoka ufukweni wa Ponta do Ouro, Kusini mwa Msumbiji.' },
        'zh-CN': { title: 'DEVOCEAN Lodge', subtitle: '莫桑比克南部蓬塔多奥罗海滩数百米处的环保住宿。' },
        'zu': { title: 'DEVOCEAN Lodge', subtitle: 'Indawo yokuhlala enobungani bemvelo emamitha ambalwa ukusuka ogwini lwasePonta do Ouro, eNingizimu yeMozambique.' }
      };

      // Country code to language mapping (matches main site logic)
      var CC_TO_LANGUAGE = {
        US: "en-US", GB: "en-GB", IE: "en-GB", AU: "en-GB", NZ: "en-GB", CA: "en-GB", 
        ZA: "en-GB", NA: "en-GB", ZW: "en-GB", BW: "en-GB", NG: "en-GB", GH: "en-GB", ZM: "en-GB", MW: "en-GB", 
        SZ: "en-GB", LS: "en-GB", MU: "en-GB", SC: "en-GB", JM: "en-GB", TT: "en-GB", 
        BB: "en-GB", FJ: "en-GB", PG: "en-GB", SB: "en-GB", VU: "en-GB",
        PT: "pt-PT", BR: "pt-BR", MZ: "pt-BR", AO: "pt-BR",
        NL: "nl-NL", BE: "nl-NL", SR: "nl-NL",
        FR: "fr-FR", MC: "fr-FR", LU: "fr-FR", CH: "fr-FR", RE: "fr-FR", 
        SN: "fr-FR", CI: "fr-FR", CM: "fr-FR", DJ: "fr-FR", NC: "fr-FR", PF: "fr-FR",
        IT: "it-IT", SM: "it-IT", VA: "it-IT",
        DE: "de-DE", AT: "de-DE", LI: "de-DE",
        ES: "es-ES", MX: "es-ES", AR: "es-ES", CO: "es-ES", PE: "es-ES", VE: "es-ES",
        CL: "es-ES", EC: "es-ES", GT: "es-ES", CU: "es-ES", BO: "es-ES", DO: "es-ES",
        HN: "es-ES", PY: "es-ES", SV: "es-ES", NI: "es-ES", CR: "es-ES", PA: "es-ES",
        UY: "es-ES", GQ: "es-ES",
        SE: "sv", FI: "sv",
        PL: "pl",
        JP: "ja-JP",
        CN: "zh-CN", HK: "zh-CN", TW: "zh-CN", SG: "zh-CN",
        RU: "ru", BY: "ru", KZ: "ru", UA: "ru", UZ: "ru", KG: "ru",
        KE: "sw", TZ: "sw", UG: "sw"
      };

      var detectedLang = null;

      // Priority 1: Use Cloudflare IP geolocation (same logic as main site)
      if (window.__CF_COUNTRY__ && window.__CF_COUNTRY__ !== '') {
        var countryCode = String(window.__CF_COUNTRY__).toUpperCase();
        detectedLang = CC_TO_LANGUAGE[countryCode] || null;
      }

      // Priority 2: Fall back to stored language preference
      if (!detectedLang) {
        detectedLang = localStorage.getItem('site.lang');
      }

      // Priority 3: Default to British English
      if (!detectedLang) {
        detectedLang = 'en-GB';
      }
      
      // LCP Optimization: Skip text replacement for English (already in HTML)
      // This eliminates ~420ms render delay for majority of visitors
      var isEnglish = detectedLang === 'en-GB' || detectedLang === 'en-US';
      
      // Apply translation only for non-English languages
      if (!isEnglish && detectedLang && heroTranslations[detectedLang]) {
        var translation = heroTranslations[detectedLang];
        var titleEl = document.getElementById('hero-title');
        var subtitleEl = document.getElementById('hero-subtitle');
        
        if (titleEl) titleEl.textContent = translation.title;
        if (subtitleEl) subtitleEl.textContent = translation.subtitle;
      }
    })();
  </script>

  <!-- JSON-LD structured data (moved to end for mobile FCP optimization) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": ["LodgingBusiness","Hotel"],
    "@id": "https://devoceanlodge.com/#lodge",
    "name": "DEVOCEAN Lodge",
    "brand": { "@type": "Brand", "name": "TERRAfrique LDA" },
    "url": "https://devoceanlodge.com/",
    "logo": "https://devoceanlodge.com/images/Logo2.png",
    "image": [
      "https://devoceanlodge.com/photos/hero01.jpg",
      "https://devoceanlodge.com/photos/hero02.jpg",
      "https://devoceanlodge.com/photos/hero03.jpg",
      "https://devoceanlodge.com/photos/hero04.jpg",
      "https://devoceanlodge.com/photos/hero05.jpg"
    ],
    "description": "Eco-friendly lodge in Ponta do Ouro, Southern Mozambique — safari tents, thatched chalet and garden cottage a few minutes from the beach.",
    "email": "info@devoceanlodge.com",
    "telephone": "+258 84 418 2252",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "Rua C, parcela 12, 1118",
      "addressLocality": "Ponta do Ouro",
      "addressRegion": "Matutuine",
      "postalCode": "1118",
      "addressCountry": "MZ"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": -26.841994852732736,
      "longitude": 32.88504331196165
    },
    "hasMap": "https://www.google.com/maps?q=-26.841994852732736,32.88504331196165&z=13&output=embed",
    "checkinTime": "14:00",
    "checkoutTime": "10:00",
    "priceRange": "$$",
    "petsAllowed": false,
    "amenityFeature": [
      { "@type": "LocationFeatureSpecification", "name": "Eco-friendly lodging", "value": true },
      { "@type": "LocationFeatureSpecification", "name": "Free high-speed Wi-Fi", "value": true },
      { "@type": "LocationFeatureSpecification", "name": "Breakfast available", "value": true }
    ],
    "availableLanguage": [
      { "@type": "Language", "name": "English", "alternateName": "en" },
      { "@type": "Language", "name": "Portuguese", "alternateName": "pt" },
      { "@type": "Language", "name": "Portuguese (Mozambique)", "alternateName": "pt-MZ" },
      { "@type": "Language", "name": "Dutch", "alternateName": "nl" },
      { "@type": "Language", "name": "French", "alternateName": "fr" },
      { "@type": "Language", "name": "Italian", "alternateName": "it" },
      { "@type": "Language", "name": "German", "alternateName": "de" },
      { "@type": "Language", "name": "Spanish", "alternateName": "es" },
      { "@type": "Language", "name": "Swedish", "alternateName": "sv" },
      { "@type": "Language", "name": "Polish", "alternateName": "pl" }
    ],
    "areaServed": { "@type": "Country", "name": "Mozambique" },
    "sameAs": [
      "https://www.facebook.com/devoceanmz/",
      "https://www.instagram.com/devoceanmz/",
      "https://x.com/DEVOCEANMZ",
      "https://www.linkedin.com/company/devocean-lodge",
      "https://www.tiktok.com/@devoceanlodge",
      "https://www.pinterest.com/devoceansa/",
      "https://www.youtube.com/@DEVOCEAN_MZ"
    ],
    "potentialAction": {
      "@type": "ReserveAction",
      "target": { "@type": "EntryPoint", "urlTemplate": "https://devoceanlodge.com/book/EN.html" },
      "result": { "@type": "LodgingReservation" }
    }
  }
  </script>

  <!-- Locale initializer (moved to end for mobile FCP optimization) -->
  <script>
    (function () {
      try {
        var SUPPORTED = ["en", "pt", "nl", "fr", "it", "de", "es", "ptmz"];
        var src = localStorage.getItem("site.lang_source") || "auto";
        var curr = localStorage.getItem("site.currency") || null;
        var lang = localStorage.getItem("site.lang") || null;

        function normLang(nav) {
          nav = String(nav || "en").toLowerCase();
          var base = nav.split("-")[0];
          if (base === "pt" && /-mz$/i.test(nav)) base = "ptmz";
          if (base === "pt-pt" || base === "pt-br") base = "pt";
          if (SUPPORTED.indexOf(base) === -1) base = "en";
          return base;
        }
        function inferCurrency(langNow) {
          if (window.__CF_COUNTRY__) {
            var CC2CUR = {
              GB: "GBP", IE: "EUR", NL: "EUR", BE: "EUR", FR: "EUR", DE: "EUR", IT: "EUR", ES: "EUR", PT: "EUR", 
              AT: "EUR", FI: "EUR", SE: "SEK", PL: "PLN", GR: "EUR", NO: "NOK", DK: "DKK", CH: "CHF", CZ: "CZK", 
              HU: "HUF", RO: "RON", HR: "EUR", SI: "EUR", SK: "EUR", EE: "EUR", LV: "EUR", LT: "EUR", MT: "EUR", CY: "EUR",
              ZA: "ZAR", MZ: "MZN", KE: "KES", TZ: "TZS", UG: "UGX", ZW: "USD", BW: "BWP", NA: "NAD", 
              EG: "EGP", MA: "MAD", AO: "AOA", GH: "GHS", NG: "NGN",
              US: "USD", CA: "CAD", MX: "MXN", BR: "BRL", AR: "ARS", CL: "CLP", CO: "COP", PE: "PEN",
              CN: "CNY", JP: "JPY", KR: "KRW", IN: "INR", TH: "THB", SG: "SGD", MY: "MYR", ID: "IDR", 
              PH: "PHP", VN: "VND", AE: "AED", SA: "SAR", RU: "RUB",
              AU: "AUD", NZ: "NZD"
            };
            var cc = String(window.__CF_COUNTRY__).toUpperCase();
            if (CC2CUR[cc]) return CC2CUR[cc];
          }
          var list = (navigator.languages && navigator.languages.length) ? navigator.languages : [navigator.language].filter(Boolean);
          var HINT = { "de": "EUR", "nl": "EUR", "fr": "EUR", "it": "EUR", "es": "EUR", "en-gb": "GBP", "en-us": "USD", "en-za": "ZAR" };
          var first = (list[0] || "").toLowerCase();
          return HINT[first] || (langNow === "ptmz" ? "MZN" : "USD");
        }

        if (!localStorage.getItem("site.lang_source")) {
          localStorage.setItem("site.lang_source", "auto");
          src = "auto";
        }

        if (src === "auto") {
          var detectedLang = null;
          if (window.__CF_COUNTRY__ && window.__CF_COUNTRY__ !== '') {
            var CC2LANG = {
              US: "en", GB: "en", IE: "en", AU: "en", NZ: "en", CA: "en",
              ZA: "en", NA: "en", ZW: "en", BW: "en", NG: "en", GH: "en",
              PT: "pt", BR: "pt", MZ: "pt", AO: "pt",
              NL: "nl", BE: "nl",
              FR: "fr", MC: "fr", LU: "fr", CH: "fr", RE: "fr",
              IT: "it", SM: "it", VA: "it",
              DE: "de", AT: "de", LI: "de",
              ES: "es", MX: "es", AR: "es", CO: "es", PE: "es", VE: "es",
              CL: "es", EC: "es", GT: "es", CU: "es", BO: "es", DO: "es",
              SE: "sv", FI: "sv",
              PL: "pl",
              JP: "ja", CN: "zh", RU: "ru"
            };
            var cc = String(window.__CF_COUNTRY__).toUpperCase();
            detectedLang = CC2LANG[cc] || null;
          }
          if (!detectedLang) {
            detectedLang = normLang(navigator.language);
          }
          localStorage.setItem("site.lang", detectedLang);
          localStorage.setItem("site.currency", inferCurrency(detectedLang));
          lang = detectedLang;
          curr = localStorage.getItem("site.currency");
        } else {
          if (!lang) {
            lang = normLang(navigator.language);
            localStorage.setItem("site.lang", lang);
          }
          if (!curr) {
            curr = inferCurrency(lang);
            localStorage.setItem("site.currency", curr);
          }
        }
        document.documentElement.setAttribute("lang", lang || "en");
      } catch (e) { }
    })();
  </script>

  <!-- Global locale setter -->
  <script>
    (function () {
      if (window.setSiteLocale) return;
      function normLang(s) {
        s = String(s || '').toLowerCase().replace('_', '-');
        if (s === 'pt-mz') s = 'ptmz';
        if (s === 'pt-pt' || s === 'pt-br') s = 'pt';
        if (/^[a-z]{2}-[a-z]{2}$/.test(s)) s = s.slice(0, 2);
        return s || 'en';
      }
      function clampCur(c) {
        if (!c) return null;
        c = String(c).toUpperCase().replace(/[^A-Z]/g, '');
        return c.length === 3 ? c : null;
      }
      function setPrefCookies(lang, currency) {
        var host = location.hostname;
        var isLocal = (host === "localhost") || (host === "127.0.0.1") || /^\d+\.\d+\.\d+\.\d+$/.test(host);
        var domainPart = isLocal ? "" : ";domain=.devoceanlodge.com";
        var securePart = location.protocol === "https:" ? ";Secure" : "";
        var base = ";max-age=31536000;path=/;SameSite=Lax" + domainPart + securePart;
        if (lang) document.cookie = "lang=" + lang + base;
        if (currency) document.cookie = "currency=" + currency + base;
      }
      window.setSiteLocale = function setSiteLocale({ lang, currency } = {}) {
        var L, C;
        try {
          L = lang ? normLang(lang) : (localStorage.getItem('site.lang') || 'en');
          C = currency ? clampCur(currency) : (localStorage.getItem('site.currency') || 'USD');
        } catch (e) {
          L = lang ? normLang(lang) : 'en';
          C = currency ? clampCur(currency) : 'USD';
        }
        try {
          localStorage.setItem('site.lang', L);
          localStorage.setItem('site.currency', C || 'USD');
          localStorage.setItem('site.lang_source', 'user');
          document.documentElement.setAttribute('lang', L);
        } catch { }
        setPrefCookies(L, C || 'USD');
      };
    })();
  </script>

  <!-- Trustindex modal fix: ensure modal iframe is above fixed header -->
  <script>
    (function() {
      var observer = new MutationObserver(function(mutations) {
        var iframes = document.querySelectorAll('iframe[src*="trustindex"]');
        iframes.forEach(function(iframe) {
          var parent = iframe.parentElement;
          while (parent && parent !== document.body) {
            var style = window.getComputedStyle(parent);
            if (style.position === 'fixed' || style.position === 'absolute') {
              parent.style.zIndex = '99999';
            }
            parent = parent.parentElement;
          }
          iframe.style.zIndex = '99999';
        });
      });
      
      observer.observe(document.body, { 
        childList: true, 
        subtree: true, 
        attributes: true, 
        attributeFilter: ['style', 'class'] 
      });
    })();
  </script>

  <!-- Trustindex Floating Certificate (delayed) -->
  <script defer async src='https://cdn.trustindex.io/loader-cert.js?706109d56a019615d026adc81e8'></script>
</body>

</html>
